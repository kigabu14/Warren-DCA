# Warren-DCA

Our goal is to define exactly what it means to classify a company for having a highly durable competitive advantage in the market utilizing well-known billionaire Warren Buffet's strategies. By researching his strategies, we will be able to create a concrete formula to find and invest in said companies.

## New Features

### Sharpe Ratio Calculation
- **Compute Sharpe Ratio** for any equity curve generated by the DCA simulation
- **Monthly scaling approach**: Uses monthly returns scaled by âˆš12 for annualized Sharpe ratio
- **Edge case handling**: Returns N/A when less than 2 return periods or zero variance
- **Configurable risk-free rate**: Default 1.5% annual, adjustable via UI

### Dividend Cashflow Integration
- **Dual mode support**: 
  - **Adjusted Close mode** (default): Uses price-adjusted data, no double counting of dividends
  - **Close + Dividends mode**: Uses raw close prices with explicit dividend cash collection
- **Explicit dividend tracking**: Separate calculation and display of dividend cash collected
- **Toggle control**: UI checkbox to switch between dividend handling modes

### Enhanced DCA Simulation
- **Extended results**: Now returns Sharpe Ratio, dividend cash, and portfolio composition details
- **Equity curve generation**: Builds monthly portfolio values for accurate Sharpe calculation
- **Mode-aware calculations**: Handles dividends appropriately based on selected mode

### Reusable Helper Functions
- `compute_sharpe(equity_series, rf_annual_pct)`: Standalone Sharpe ratio calculator
- `apply_dividend_cashflow(price_div_df, position_timeline)`: Placeholder for future strategy dividend logic

### UI Improvements
- **Risk-free Rate input**: Annual percentage input for Sharpe calculation (0-20%, default 1.5%)
- **Dividend Mode toggle**: Checkbox to select between adjusted vs explicit dividend handling
- **Enhanced results display**: Shows Sharpe Ratio, dividend cash, and mode indicators
- **Export support**: New metrics included in Excel export functionality

## Usage Notes

### Sharpe Ratio Calculation
- Based on monthly portfolio valuations converted to annualized metric
- Uses excess returns over configurable risk-free rate
- Returns "N/A" for insufficient data or zero volatility scenarios

### Dividend Handling Modes
- **Adjusted Close (recommended)**: Dividends already reflected in historical prices, no additional cash
- **Close + Dividends**: Raw prices with separate dividend cash accumulation, shows explicit dividend income

### Testing Suggestions
- **AAPL, MSFT**: Test with dividend-paying stocks to compare modes
- **BRK-B**: Test with low/no dividend stocks to verify consistent behavior
- **5-year timeframe**: Recommended for meaningful Sharpe ratio calculation